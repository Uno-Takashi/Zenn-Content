---
title: "[GitHub Actions]コードの複雑度（CCN）をCIに組み込む"
emoji: "🐕"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["CI","github-actions","python","自動化"]
published: false
---

## エレベータ―ピッチ

- コードの複雑度（CCN、行数など）をCIに組み込むことで、複雑すぎるコードのマージを阻止。
- GitHub  Actionとして、[GitHub Marketplace](https://github.com/marketplace/actions/lizard-runner)に公開し、容易に導入可能。
- 引数としてしきい値などを容易にカスタマイズ可能

## 概要

一般的に、アジャイル開発の現場においては、CIとしてテスト自動化を組み込むことが行われています。テスト自動化を行う事で、マージしたコードが、思いもよらない機能に対して、致命的な副作用を発生させていないことが保証され続けます。これによりエンジニアはより心理的安全性の高い環境で開発を行う事ができます。

しかしながら、プロダクトが一定以上の規模になってくると、テストケースが十分に存在しており、カバレッジが高く保たれていたとしても、複雑すぎて保守性が下がってしまうことがあります。

特に、マージしたときには特段複雑ではないと感じていたとしても、プロダクトの成長とともにいつの間にか多くのコンポーネントと結合し、変更することが難しいブラックボックスが生まれてしまうことは、多くのデベロッパーが経験していると思います。

こうした、複雑すぎるコードがいつの間にか混入することを防ぐために、CIの一環としてコードの複雑度を監視し続ける方法を求めていました。

そこで、[lizard](http://www.lizard.ws/)というOSSを使って、CIでCCNなどの指標を図り続けることによって、複雑すぎるコードがマージされることを防ぐための簡単なツールを作成しました。
